{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\saura\\\\Documents\\\\Blog-web-app\\\\blog-app\\\\src\\\\components\\\\BlogComponent.jsx\";\nimport { ErrorMessage, Field, Form, Formik } from \"formik\";\nimport React, { Component } from \"react\";\nimport AuthenticationService from \"../service/AuthenticationService\";\nimport BlogDataService from \"../service/BlogDataService\";\nimport moment from \"moment\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst USER = 'USER';\nconst ADMIN = 'ADMIN';\nconst SUPERADMIN = 'SUPERADMIN';\nconst APPROVED = 'APPROVED';\nconst PENDING = 'PENDING';\n\nclass BlogComponent extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      id: this.props.params.id,\n      username: '',\n      description: '',\n      date: moment(new Date()).format('YYYY-MM-DD'),\n      postStatus: PENDING\n    };\n    this.onSubmit = this.onSubmit.bind(this);\n    this.validate = this.validate.bind(this);\n  }\n\n  componentDidMount() {\n    if (this.state.id === -1) {\n      return;\n    }\n\n    BlogDataService.retrieveBlogById(this.state.id).then(res => {\n      this.setState({\n        description: res.data.description,\n        date: moment(res.data.date).format(\"MMM Do YY\")\n      });\n    });\n  }\n\n  render() {\n    let {\n      description,\n      date\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Blog\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: /*#__PURE__*/_jsxDEV(Formik, {\n          initialValues: {\n            description,\n            date\n          },\n          onSubmit: this.onSubmit,\n          validateOnChange: false,\n          validateOnBlur: false,\n          validate: this.validate,\n          enableReinitialize: true,\n          children: props => /*#__PURE__*/_jsxDEV(Form, {\n            children: [/*#__PURE__*/_jsxDEV(ErrorMessage, {\n              name: \"description\",\n              component: \"div\",\n              className: \"alert alert-warning\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(ErrorMessage, {\n              name: \"date\",\n              component: \"div\",\n              className: \"alert alert-warning\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 66,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"fieldset\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Write your blog\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 69,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(Field, {\n                className: \"form-control\",\n                component: \"textarea\",\n                name: \"description\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 70,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 68,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"fieldset\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Date\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 73,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(Field, {\n                className: \"form-control\",\n                type: \"date\",\n                name: \"date\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 74,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 72,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-success\",\n              type: \"submit\",\n              children: \"Save\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 13\n    }, this);\n  }\n\n  onSubmit(values) {\n    //let username = AuthenticationService.getLoggedInUserName()\n    let role = AuthenticationService.getUserRole();\n    if (role === ADMIN) this.setState({\n      postStatus: APPROVED\n    });\n    let blog = {\n      id: this.state.id,\n      description: values.description,\n      date: values.targetDate,\n      postStatus: this.state.postStatus\n    };\n\n    if (this.state.id === -1) {\n      BlogDataService.createBlog(blog).then(() => this.props.navigate('/blogs'));\n    } else {\n      BlogDataService.updateBlog(this.state.id, blog).then(() => this.props.navigate('/blogs'));\n    }\n\n    console.log(values);\n  }\n\n  validate(values) {\n    let errors = {};\n\n    if (!values.description) {\n      errors.description = 'Enter a Description';\n    } else if (values.description.length < 5) {\n      errors.description = 'Enter atleast 5 Characters in Description';\n    }\n\n    if (!moment(values.targetDate).isValid()) {\n      errors.targetDate = 'Enter a valid Target Date';\n    }\n\n    return errors;\n  }\n\n}\n\nexport default BlogComponent;","map":{"version":3,"names":["ErrorMessage","Field","Form","Formik","React","Component","AuthenticationService","BlogDataService","moment","USER","ADMIN","SUPERADMIN","APPROVED","PENDING","BlogComponent","constructor","props","state","id","params","username","description","date","Date","format","postStatus","onSubmit","bind","validate","componentDidMount","retrieveBlogById","then","res","setState","data","render","values","role","getUserRole","blog","targetDate","createBlog","navigate","updateBlog","console","log","errors","length","isValid"],"sources":["C:/Users/saura/Documents/Blog-web-app/blog-app/src/components/BlogComponent.jsx"],"sourcesContent":["import { ErrorMessage, Field, Form, Formik } from \"formik\";\r\nimport React, { Component } from \"react\";\r\nimport AuthenticationService from \"../service/AuthenticationService\";\r\nimport BlogDataService from \"../service/BlogDataService\";\r\nimport moment from \"moment\";\r\nconst USER = 'USER';\r\nconst ADMIN = 'ADMIN';\r\nconst SUPERADMIN = 'SUPERADMIN';\r\nconst APPROVED = 'APPROVED';\r\nconst PENDING = 'PENDING';\r\n\r\n\r\nclass BlogComponent extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n\r\n        this.state = {\r\n            id: this.props.params.id,\r\n            username: '',\r\n            description: '',\r\n            date: moment(new Date()).format('YYYY-MM-DD'),\r\n            postStatus: PENDING\r\n        }\r\n\r\n        this.onSubmit = this.onSubmit.bind(this)\r\n        this.validate = this.validate.bind(this)\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (this.state.id === -1) {\r\n            return\r\n        }\r\n\r\n        BlogDataService.retrieveBlogById(this.state.id)\r\n            .then(res => {\r\n                this.setState({\r\n                    description: res.data.description,\r\n                    date: moment(res.data.date).format(\"MMM Do YY\")\r\n                })\r\n\r\n            })\r\n\r\n    }\r\n\r\n\r\n    render() {\r\n        let { description, date } = this.state;\r\n        return (\r\n            <div>\r\n                <h1>Blog</h1>\r\n                <div className=\"container\">\r\n                    <Formik\r\n                        initialValues={{ description, date }}\r\n                        onSubmit={this.onSubmit}\r\n                        validateOnChange={false}\r\n                        validateOnBlur={false}\r\n                        validate={this.validate}\r\n                        enableReinitialize={true}\r\n                    >\r\n                        {\r\n                            (props) => (\r\n                                <Form>\r\n                                    <ErrorMessage name=\"description\" component=\"div\"\r\n                                        className=\"alert alert-warning\" />\r\n                                    <ErrorMessage name=\"date\" component=\"div\"\r\n                                        className=\"alert alert-warning\" />\r\n                                    <fieldset className=\"form-group\">\r\n                                        <label>Write your blog</label>\r\n                                        <Field className=\"form-control\" component=\"textarea\" name=\"description\"  />\r\n                                    </fieldset>\r\n                                    <fieldset className=\"form-group\">\r\n                                        <label>Date</label>\r\n                                        <Field className=\"form-control\" type=\"date\" name=\"date\" />\r\n                                    </fieldset>\r\n                                    <button className=\"btn btn-success\" type=\"submit\">Save</button>\r\n                                </Form>\r\n                            )\r\n                        }\r\n                    </Formik>\r\n\r\n                </div>\r\n            </div>\r\n\r\n\r\n        )\r\n\r\n    }\r\n\r\n    onSubmit(values) {\r\n        //let username = AuthenticationService.getLoggedInUserName()\r\n\r\n        let role = AuthenticationService.getUserRole()\r\n\r\n        if (role === ADMIN)\r\n            this.setState({ postStatus: APPROVED })\r\n\r\n        let blog = {\r\n            id: this.state.id,\r\n            description: values.description,\r\n            date: values.targetDate,\r\n            postStatus: this.state.postStatus\r\n        }\r\n\r\n        if (this.state.id === -1) {\r\n            BlogDataService.createBlog(blog)\r\n                .then(() => this.props.navigate('/blogs'))\r\n        } else {\r\n            BlogDataService.updateBlog(this.state.id, blog)\r\n                .then(() => this.props.navigate('/blogs'))\r\n        }\r\n\r\n        console.log(values);\r\n    }\r\n\r\n    validate(values) {\r\n        let errors = {}\r\n        if (!values.description) {\r\n            errors.description = 'Enter a Description'\r\n        } else if (values.description.length < 5) {\r\n            errors.description = 'Enter atleast 5 Characters in Description'\r\n        }\r\n\r\n        if (!moment(values.targetDate).isValid()) {\r\n            errors.targetDate = 'Enter a valid Target Date'\r\n        }\r\n\r\n        return errors\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\nexport default BlogComponent;"],"mappings":"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"},"metadata":{},"sourceType":"module"}